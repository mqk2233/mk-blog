{"version":3,"sources":["webpack:///./src/components/Backstage/AddArticle.vue?5701","webpack:///src/components/Backstage/AddArticle.vue","webpack:///./src/components/Backstage/AddArticle.vue?0d03","webpack:///./src/components/Backstage/AddArticle.vue?a818","webpack:///./src/components/Backstage/AddArticle.vue?e0f2"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","staticClass","categoryList","on","getCategoryId","model","value","articleEdit","callback","$$v","$set","expression","_l","item","key","id","changLabelId","_v","_s","labelName","ref","imgAdd","changeData","back","doAddArticle","staticRenderFns","data","labelList","title","contentMd","contentHtml","status","isDeleted","categoryId","labelIds","categoryIds","methods","$router","push","getCategoryList","$api","category","getLabelList","label","ids","param","article","formdata","append","$file","img","uploadImg","then","getArticleById","length","mounted","currentRoute","meta","component"],"mappings":"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","file":"js/chunk-13ffaa6e.4f15c587.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"main\"}},[_c('Card',[_c('i-form',{attrs:{\"label-width\":60,\"inline\":\"\"}},[_c('Row',[_c('i-col',{attrs:{\"span\":\"5\"}},[_c('FormItem',{attrs:{\"label\":\"分类\",\"prop\":\"articleEdit.categoryId\"}},[_c('Cascader',{staticClass:\"form\",attrs:{\"data\":_vm.categoryList,\"clearable\":\"\"},on:{\"on-change\":_vm.getCategoryId},model:{value:(_vm.articleEdit.categoryIds),callback:function ($$v) {_vm.$set(_vm.articleEdit, \"categoryIds\", $$v)},expression:\"articleEdit.categoryIds\"}})],1)],1),_c('i-col',{attrs:{\"span\":\"5\"}},[_c('FormItem',{attrs:{\"label\":\"标签\",\"prop\":\"labelList\"}},[_c('i-select',{staticClass:\"form\",attrs:{\"multiple\":\"\",\"clearable\":\"\",\"max-tag-count\":2},model:{value:(_vm.articleEdit.labelIds),callback:function ($$v) {_vm.$set(_vm.articleEdit, \"labelIds\", $$v)},expression:\"articleEdit.labelIds\"}},_vm._l((_vm.labelList),function(item){return _c('Option',{key:item.id,attrs:{\"value\":item.id},on:{\"on-change\":_vm.changLabelId}},[_vm._v(_vm._s(item.labelName)+\" \")])}),1)],1)],1)],1)],1),_c('mavon-editor',{ref:\"md\",staticClass:\"editor\",attrs:{\"ishljs\":true},on:{\"imgAdd\":_vm.imgAdd,\"change\":_vm.changeData},model:{value:(_vm.articleEdit.contentMd),callback:function ($$v) {_vm.$set(_vm.articleEdit, \"contentMd\", $$v)},expression:\"articleEdit.contentMd\"}})],1),_c('i-form',{attrs:{\"inline\":\"\"}},[_c('Row',{staticClass:\"row\",attrs:{\"type\":\"flex\",\"justify\":\"center\"}},[_c('FormItem',[_c('Button',{on:{\"click\":_vm.back}},[_vm._v(\"取消\")])],1),_c('FormItem',[_c('Button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.doAddArticle}},[_vm._v(\"提交\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div id=\"main\">\r\n    <Card>\r\n      <i-form :label-width=\"60\" inline>\r\n        <Row>\r\n          <i-col span=\"5\">\r\n            <FormItem label=\"分类\" prop=\"articleEdit.categoryId\">\r\n              <Cascader\r\n                  @on-change=\"getCategoryId\"\r\n                  :data=\"categoryList\"\r\n                  v-model=\"articleEdit.categoryIds\"\r\n                  clearable\r\n                  class=\"form\"\r\n              />\r\n            </FormItem>\r\n          </i-col>\r\n          <i-col span=\"5\">\r\n            <FormItem label=\"标签\" prop=\"labelList\">\r\n              <i-select\r\n                  multiple\r\n                  clearable\r\n                  :max-tag-count=\"2\"\r\n                  v-model=\"articleEdit.labelIds\"\r\n                  class=\"form\"\r\n              >\r\n                <Option\r\n                    v-for=\"item in labelList\"\r\n                    :value=\"item.id\"\r\n                    :key=\"item.id\"\r\n                    @on-change=\"changLabelId\"\r\n                >{{ item.labelName }}\r\n                </Option>\r\n              </i-select>\r\n            </FormItem>\r\n          </i-col>\r\n        </Row>\r\n      </i-form>\r\n      <mavon-editor\r\n          ref=\"md\"\r\n          @imgAdd=\"imgAdd\"\r\n          @change=\"changeData\"\r\n          v-model=\"articleEdit.contentMd\"\r\n          :ishljs=\"true\"\r\n          class=\"editor\"\r\n      />\r\n    </Card>\r\n    <i-form inline>\r\n      <Row type=\"flex\" justify=\"center\" class=\"row\">\r\n        <FormItem>\r\n          <Button @click=\"back\">取消</Button>\r\n        </FormItem>\r\n        <FormItem>\r\n          <Button type=\"primary\" @click=\"doAddArticle\">提交</Button>\r\n        </FormItem>\r\n      </Row>\r\n    </i-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      categoryList: [],\r\n      labelList: [],\r\n      articleEdit: {\r\n        //文章对象\r\n        id: 0,\r\n        title: \"\",\r\n        contentMd: \"\",\r\n        contentHtml: \"\",\r\n        status: 0,\r\n        isDeleted: 0,\r\n        categoryId: 0,\r\n        labelIds: [],\r\n        categoryIds: []\r\n      }\r\n    };\r\n  },\r\n  methods: {\r\n    // 返回文章列表\r\n    back() {\r\n      this.$router.push({name: \"articleAdmin\"});\r\n    },\r\n    // 分类列表\r\n    getCategoryList() {\r\n      this.$api.category\r\n          .categoryList()\r\n          .then(res => {\r\n            this.categoryList = res.data.data;\r\n          })\r\n          .catch(err => {\r\n            this.$Notice.warning({title: err.data.msg});\r\n          });\r\n    },\r\n    // 标签列表\r\n    getLabelList() {\r\n      this.$api.label\r\n          .labelAllList()\r\n          .then(res => {\r\n            this.labelList = res.data.data;\r\n          })\r\n          .catch(err => {\r\n            this.$Notice.warning({title: err.data.msg});\r\n          });\r\n    },\r\n    // 改变标签id\r\n    changLabelId(ids) {\r\n      this.articleEdit.labelIds = ids;\r\n    },\r\n    // 编辑文章\r\n    doAddArticle() {\r\n      const param = this.articleEdit;\r\n      if (param.id !== 0 && param.id !== null) {\r\n        this.$api.article\r\n            .doEditArticle(param)\r\n            .then(res => {\r\n              this.$Notice.success({title: res.data.msg});\r\n              this.$router.push({name: \"articleAdmin\"});\r\n            })\r\n            .catch(err => {\r\n              this.$Notice.warning({title: err.data.msg});\r\n            });\r\n      } else {\r\n        param.id = null;\r\n        this.$api.article\r\n            .doAddArticle(param)\r\n            .then(res => {\r\n              this.$Notice.success({title: res.data.msg});\r\n              this.$router.push({name: \"articleAdmin\"});\r\n            })\r\n            .catch(err => {\r\n              this.$Notice.warning({title: err.data.msg});\r\n            });\r\n      }\r\n    },\r\n    // 绑定@imgAdd event\r\n    imgAdd(pos, $file) {\r\n      // 第一步.将图片上传到服务器.\r\n      let formdata = new FormData();\r\n      formdata.append(\"smfile\", $file);\r\n      this.$api.img.uploadImg(formdata).then(res => {\r\n        this.$refs.md.$img2Url(pos, res.data.url);\r\n      });\r\n    },\r\n    changeData(value, render) {\r\n      this.articleEdit.contentHtml = render;\r\n    },\r\n    getArticleById() {\r\n      this.$api.article\r\n          .getArticleById(this.$router.currentRoute.params.id)\r\n          .then(res => {\r\n            this.articleEdit = res.data.data;\r\n          })\r\n          .catch(err => {\r\n            this.$Notice.warning({title: err.data.msg});\r\n          });\r\n    },\r\n    getCategoryId(value) {\r\n      this.articleEdit.categoryId = value[value.length - 1];\r\n    }\r\n  },\r\n  mounted() {\r\n    this.getCategoryList();\r\n    this.getLabelList();\r\n    if (\r\n        this.$router.currentRoute.params.id != null &&\r\n        this.$router.currentRoute.params.id !== \"\"\r\n    ) {\r\n      this.getArticleById();\r\n      this.$router.currentRoute.meta.title = \"编辑文章\";\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style>\r\n.form{\r\n  width: 13em\r\n}\r\n.editor{\r\n  z-index: 0\r\n}\r\n.row{\r\n  margin-top: 20px\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddArticle.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddArticle.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AddArticle.vue?vue&type=template&id=461bb1ee&\"\nimport script from \"./AddArticle.vue?vue&type=script&lang=js&\"\nexport * from \"./AddArticle.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AddArticle.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddArticle.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}
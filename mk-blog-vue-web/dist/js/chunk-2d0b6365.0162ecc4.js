(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b6365"],{"1bca":function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("Tree",{key:t.treeKey,attrs:{data:t.data5,render:t.renderContent}}),i("Modal",{attrs:{loading:t.addCategoryFlag,title:t.modalTitle},on:{"on-ok":function(e){return t.append(t.modalTitle)}},model:{value:t.isEditCategory,callback:function(e){t.isEditCategory=e},expression:"isEditCategory"}},[i("i-form",{ref:"categoryEdit",attrs:{model:t.categoryEdit,rules:t.ruleCustom}},[i("FormItem",{attrs:{label:"分类名"}},[i("label",[i("Input",{attrs:{placeholder:"分类名"},model:{value:t.categoryEdit.title,callback:function(e){t.$set(t.categoryEdit,"title",e)},expression:"categoryEdit.title"}})],1)]),i("FormItem",{attrs:{label:"排序标识",prop:"sort"}},[i("label",[i("Input",{attrs:{placeholder:"排序标识"},model:{value:t.categoryEdit.sort,callback:function(e){t.$set(t.categoryEdit,"sort",e)},expression:"categoryEdit.sort"}})],1)]),i("FormItem",{attrs:{label:"是否启用"}},[i("i-switch",{attrs:{"false-value":1,size:"large","true-value":0},model:{value:t.categoryEdit.isDeleted,callback:function(e){t.$set(t.categoryEdit,"isDeleted",e)},expression:"categoryEdit.isDeleted"}},[i("span",{attrs:{slot:"open"},slot:"open"},[t._v("启用")]),i("span",{attrs:{slot:"close"},slot:"close"},[t._v("禁用")])])],1)],1)],1)],1)},a=[],r={data:function(){var t=this;return{categoryEdit:{id:0,pid:0,title:"",categoryName:"",sort:0,isDeleted:0},categoryEditInit:{id:0,pid:0,title:"",categoryName:"",sort:0,isDeleted:0},treeKey:0,modalTitle:"",isEditCategory:!1,addCategoryFlag:!0,currentBeen:{},ruleCustom:{title:[{required:!0,message:"分类名不能为空",trigger:"blur"},{pattern:/.{2,6}/,message:"请输入2-6位字符",trigger:"blur"}]},data5:[{title:"分类树",expand:!0,render:function(e,i){var o=i.data;return e("span",{style:{display:"inline-block",width:"300px"}},[e("span",[e("Icon",{props:{type:"ios-folder-outline"},style:{marginRight:"8px"}}),e("span",o.title)]),e("span",{style:{display:"inline-block",float:"right",marginRight:"32px"}},[e("Button",{props:Object.assign({},t.buttonProps,{icon:"ios-add",type:"primary"}),style:{width:"64px",float:"right"},on:{click:function(){t.openModel(o,"add")}}})])])},children:[]}],buttonProps:{type:"default",size:"small"}}},methods:{renderContent:function(t,e){var i=this,o=e.root,a=e.node,r=e.data;return t("span",{style:{display:"inline-block",width:"300px"}},[t("span",[t("Icon",{props:{type:"ios-paper-outline"},style:{marginRight:"8px"}}),t("span",r.title+"-"+r.sort)]),t("span",{style:{width:"100px",display:"inline-block",float:"right"}},[t("Button",{props:Object.assign({},this.buttonProps,{icon:"ios-create-outline"}),style:{marginRight:"8px"},on:{click:function(){i.openModel(r,"edit")}}}),t("Button",{props:Object.assign({},this.buttonProps,{icon:"ios-add"}),style:{marginRight:"8px"},on:{click:function(){i.openModel(r,"add")}}}),t("Button",{props:Object.assign({},this.buttonProps,{icon:"ios-remove"}),on:{click:function(){i.remove(o,a,r)}}})])])},append:function(t){if("新增分类"===t){this.categoryEdit.pid=this.currentBeen.value||0,this.categoryEdit.id=null,this.categoryEdit.categoryName=this.categoryEdit.title;var e=this.categoryEdit;this.doAddCategory(e)}else this.categoryEdit.categoryName=this.categoryEdit.title,this.doEditCategory(this.categoryEdit)},remove:function(t,e,i){this.doDelCategory(i.value)},openModel:function(t,e){"add"===e?(this.isEditCategory=!0,this.currentBeen=t,this.modalTitle="新增分类",this.categoryEdit=this.categoryEditInit):(this.isEditCategory=!0,this.categoryEdit=t,this.categoryEdit.id=t.value,this.modalTitle="编辑分类")},getCategoryList:function(){var t=this;this.$api.category.categoryList().then((function(e){t.data5[0].children=e.data.data})).catch((function(e){t.$Notice.warning({title:e.data.msg})}))},getCategoryById:function(t){var e=this;this.$api.category.getCategoryById(t).then((function(t){e.categoryEdit=t.data.data})).catch((function(t){e.$Notice.warning({title:t.data.msg})}))},doAddCategory:function(t){var e=this;console.log(t),this.$api.category.doAddCategory(t).then((function(t){e.$Notice.success({title:t.data.msg}),e.getCategoryList(),e.addCategoryFlag=!1,e.isEditCategory=!1,e.treeKey+=1})).catch((function(t){e.$Notice.warning({title:t.data.msg})}))},doEditCategory:function(t){var e=this;console.log(t),this.$api.category.doEditCategory(t).then((function(t){e.$Notice.success({title:t.data.msg}),e.getCategoryList(),e.isEditCategory=!1,e.treeKey+=1})).catch((function(t){e.$Notice.warning({title:t.data.msg})}))},doDelCategory:function(t){var e=this;this.$api.category.doDelCategory(t).then((function(t){e.$Notice.success({title:t.data.msg}),e.getCategoryList(),e.treeKey+=1})).catch((function(t){e.$Notice.warning({title:t.data.msg})}))}},mounted:function(){this.getCategoryList()}},n=r,s=i("2877"),l=Object(s["a"])(n,o,a,!1,null,null,null);e["default"]=l.exports}}]);
//# sourceMappingURL=chunk-2d0b6365.0162ecc4.js.map
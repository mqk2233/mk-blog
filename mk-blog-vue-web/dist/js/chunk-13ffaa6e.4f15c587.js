(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-13ffaa6e"],{a551:function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"main"}},[e("Card",[e("i-form",{attrs:{"label-width":60,inline:""}},[e("Row",[e("i-col",{attrs:{span:"5"}},[e("FormItem",{attrs:{label:"分类",prop:"articleEdit.categoryId"}},[e("Cascader",{staticClass:"form",attrs:{data:t.categoryList,clearable:""},on:{"on-change":t.getCategoryId},model:{value:t.articleEdit.categoryIds,callback:function(a){t.$set(t.articleEdit,"categoryIds",a)},expression:"articleEdit.categoryIds"}})],1)],1),e("i-col",{attrs:{span:"5"}},[e("FormItem",{attrs:{label:"标签",prop:"labelList"}},[e("i-select",{staticClass:"form",attrs:{multiple:"",clearable:"","max-tag-count":2},model:{value:t.articleEdit.labelIds,callback:function(a){t.$set(t.articleEdit,"labelIds",a)},expression:"articleEdit.labelIds"}},t._l(t.labelList,(function(a){return e("Option",{key:a.id,attrs:{value:a.id},on:{"on-change":t.changLabelId}},[t._v(t._s(a.labelName)+" ")])})),1)],1)],1)],1)],1),e("mavon-editor",{ref:"md",staticClass:"editor",attrs:{ishljs:!0},on:{imgAdd:t.imgAdd,change:t.changeData},model:{value:t.articleEdit.contentMd,callback:function(a){t.$set(t.articleEdit,"contentMd",a)},expression:"articleEdit.contentMd"}})],1),e("i-form",{attrs:{inline:""}},[e("Row",{staticClass:"row",attrs:{type:"flex",justify:"center"}},[e("FormItem",[e("Button",{on:{click:t.back}},[t._v("取消")])],1),e("FormItem",[e("Button",{attrs:{type:"primary"},on:{click:t.doAddArticle}},[t._v("提交")])],1)],1)],1)],1)},n=[],c={data:function(){return{categoryList:[],labelList:[],articleEdit:{id:0,title:"",contentMd:"",contentHtml:"",status:0,isDeleted:0,categoryId:0,labelIds:[],categoryIds:[]}}},methods:{back:function(){this.$router.push({name:"articleAdmin"})},getCategoryList:function(){var t=this;this.$api.category.categoryList().then((function(a){t.categoryList=a.data.data})).catch((function(a){t.$Notice.warning({title:a.data.msg})}))},getLabelList:function(){var t=this;this.$api.label.labelAllList().then((function(a){t.labelList=a.data.data})).catch((function(a){t.$Notice.warning({title:a.data.msg})}))},changLabelId:function(t){this.articleEdit.labelIds=t},doAddArticle:function(){var t=this,a=this.articleEdit;0!==a.id&&null!==a.id?this.$api.article.doEditArticle(a).then((function(a){t.$Notice.success({title:a.data.msg}),t.$router.push({name:"articleAdmin"})})).catch((function(a){t.$Notice.warning({title:a.data.msg})})):(a.id=null,this.$api.article.doAddArticle(a).then((function(a){t.$Notice.success({title:a.data.msg}),t.$router.push({name:"articleAdmin"})})).catch((function(a){t.$Notice.warning({title:a.data.msg})})))},imgAdd:function(t,a){var e=this,i=new FormData;i.append("smfile",a),this.$api.img.uploadImg(i).then((function(a){e.$refs.md.$img2Url(t,a.data.url)}))},changeData:function(t,a){this.articleEdit.contentHtml=a},getArticleById:function(){var t=this;this.$api.article.getArticleById(this.$router.currentRoute.params.id).then((function(a){t.articleEdit=a.data.data})).catch((function(a){t.$Notice.warning({title:a.data.msg})}))},getCategoryId:function(t){this.articleEdit.categoryId=t[t.length-1]}},mounted:function(){this.getCategoryList(),this.getLabelList(),null!=this.$router.currentRoute.params.id&&""!==this.$router.currentRoute.params.id&&(this.getArticleById(),this.$router.currentRoute.meta.title="编辑文章")}},r=c,l=(e("dcd8"),e("2877")),s=Object(l["a"])(r,i,n,!1,null,null,null);a["default"]=s.exports},da8c:function(t,a,e){},dcd8:function(t,a,e){"use strict";e("da8c")}}]);
//# sourceMappingURL=chunk-13ffaa6e.4f15c587.js.map